{% load static %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

<style>
    /* --- RESET & VARIABLES --- */
    :root {
        --header-bg: #ffffff;
        --topbar-bg: #6c757d; /* Màu xám Top bar */
        --text-main: #000000;
        --accent-color: #2f5acf; /* Màu xanh thương hiệu */
    }

    /* Áp dụng Font Poppins cho toàn bộ Header */
    body, .header-wrapper {
        font-family: 'Poppins', sans-serif;
    }

    a { text-decoration: none !important; transition: 0.2s; }
    ul { list-style: none; margin: 0; padding: 0; }

    /* --- 2. TOP BAR (Xám - Tối giản) --- */
    .top-bar {
        background-color: #05339C;
        color: #fff;
        font-size: 13px; /* Tăng nhẹ size chữ cho Poppins dễ đọc */
        padding: 6px 0;
        font-weight: 400;
    }
    .top-bar .container {
        display: flex; justify-content: space-between; align-items: center;
    }

    /* Phần bên trái (Giữ lại hoặc xóa tùy bạn) */
    .top-left { opacity: 0.8; font-size: 12px; }

    /* Phần bên phải (Hello, User) */
    .top-user-welcome {
        font-weight: 500;
        letter-spacing: 0.3px;
        display: flex; align-items: center; gap: 8px;
    }
    .top-user-welcome i { font-size: 14px; }

    /* --- 3. MAIN HEADER --- */
    .main-header {
        background: #fff;
        padding: 12px 0; /* Co gọn padding lại chút */
        position: sticky; top: 0; z-index: 1000;
        box-shadow: 0 4px 20px rgba(0,0,0,0.03);
    }

    .header-layout {
        display: flex; align-items: center; justify-content: space-between;
    }

    /* Logo */
    .brand-logo img { height: 32px; width: auto; }

    /* Menu Giữa (Font Poppins Đậm) */
    .center-nav { display: flex; gap: 35px; }
    .nav-item-link {
        font-size: 14px;
        font-weight: 700; /* Đậm đà theo style Coolmate */
        text-transform: uppercase;
        color: var(--text-main);
        position: relative;
        letter-spacing: 0.5px;
    }
    .nav-item-link:hover { color: var(--accent-color); }
    .nav-item-link.sale { color: #d0021b; }

    /* Search & Icons */
    .right-actions { display: flex; align-items: center; gap: 20px; }

    /* Search Bar (Viên thuốc) */
    .cool-search { position: relative; width: 300px; }
    .cool-search input {
        width: 100%; height: 42px;
        border-radius: 50px;
        border: 1px solid #e1e1e1;
        padding: 0 45px 0 20px;
        font-size: 14px; font-family: 'Poppins', sans-serif;
        outline: none; transition: 0.3s;
        background: #f9f9f9; /* Nền xám rất nhẹ cho ô tìm kiếm */
    }
    .cool-search input:focus {
        background: #fff; border-color: #05339C; box-shadow: 0 4px 10px rgba(0,0,0,0.05);
    }
    .cool-search button {
        position: absolute; right: 15px; top: 50%; transform: translateY(-50%);
        background: none; border: none; color: #333; font-size: 18px; cursor: pointer;
    }

    /* Icon User & Cart */
    .action-icon {
        font-size: 22px; color: #05339C; position: relative;
        display: flex; align-items: center; transition: 0.2s;
    }
    .action-icon:hover { transform: translateY(-2px); color: var(--accent-color); }

    .cart-count {
        position: absolute; top: -5px; right: -8px;
        background: #d0021b; color: #fff;
        font-size: 11px; font-weight: 600;
        height: 18px; width: 18px;
        border-radius: 50%;
        display: flex; align-items: center; justify-content: center;
        border: 2px solid #fff;
    }

    /* Responsive */
    @media (max-width: 991px) {
        .center-nav, .top-bar { display: none; }
    }
</style>

<header class="header-wrapper">
    <div class="top-bar">
        <div class="container">
            <div class="top-left">
                <span>WELCOME TO DKMV SHOP | EN </span>
            </div>

            <div class="top-user-welcome">
                {% if user.is_authenticated %}
                    <span>Hello, <b>{{ user.first_name }}</b></span>

                {% else %}
                    <a href="{% url 'login' %}" style="color: white; font-weight: 500;">
                        <i class="fas fa-sign-in-alt mr-1"></i> Đăng nhập / Đăng ký
                    </a>
                {% endif %}
            </div>
        </div>
    </div>

    <div class="main-header">
        <div class="container">
            <div class="header-layout">

                <a href="{% url 'home' %}" class="brand-logo">
                    <img src="{% static '/images/logo.png' %}" alt="DKMV Logo">
                </a>

                <nav class="center-nav d-none d-lg-flex">
                    <a href="{% url 'store' %}" class="nav-item-link text-primary">NEW</a>

                    {% for category in links %}
                        <a href="{{ category.get_url }}" class="nav-item-link">{{ category.category_name }}</a>
                    {% endfor %}

                    <a href="#" class="nav-item-link sale">SALE -50%</a>
                </nav>

                <div class="right-actions">

                    <form action="{% url 'search' %}" method="GET" class="cool-search d-none d-md-block">
                        <input type="text" placeholder="Search..." name="keyword">
                        <button type="submit"><i class="fas fa-search"></i></button>
                    </form>

                    {% if user.is_authenticated %}
                        <a href="{% url 'dashboard' %}" class="action-icon" title="Dashboard">
                            <i class="fas fa-user"></i>
                        </a>
                    {% else %}
                        <a href="{% url 'login' %}" class="action-icon" title="Tài khoản">
                            <i class="far fa-user"></i>
                        </a>
                    {% endif %}

                    <a href="{% url 'cart' %}" class="action-icon">
                        <i class="fas fa-shopping-bag"></i>
                        <span class="cart-count">{{ cart_count }}</span>
                    </a>
                </div>

            </div>
        </div>
    </div>

    </header>